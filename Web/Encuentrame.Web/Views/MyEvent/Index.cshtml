@using Encuentrame.Web
@using Encuentrame.Web.Helpers
@using Encuentrame.Web.Helpers.DataTable
@using Encuentrame.Web.Models.Events

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = Translations.ManageEventListTitle;
}

@section scripts
{
    @Scripts.Render("~/bundles/datatable")
    @Scripts.Render("~/bundles/form")
}

<h2 class="page-header">@ViewBag.Title</h2>
@Html.SuccessSummary()
@Html.ActionLink(Translations.Create, "Create", new { }, new { @class = "btn btn-primary" })
<div class="table-container">
    @(Html.BuildTable<EventListModel>(Url.Action("GetItems", "ManageEvent"))
          .InServer()
          .AddColumn(x => x.Id)
          .AddColumn(x => x.Name)
          .AddColumn(x => x.Latitude)
          .AddColumn(x => x.Longitude)
          .AddColumn(x => x.BeginDateTime)
          .AddColumn(x => x.EndDateTime)
          .AddColumn(x => x.City)
          .AddColumn("Actions", dataTemplate: "actionsTemplate")
          .AddFilter(x => x.Name)
          .AddFilter(x => x.BeginDateTime)
          .AddFilter(x => x.EndDateTime)
          .AddFilter(x => x.City)
          .Build())
</div>

<script id="actionsTemplate" type="text/template">
    <a class="btn btn-info btn-xs" href="@Url.Action("Details")/<%=row.Id%>">@Translations.Detail</a>
    <a class="btn btn-primary btn-xs" href="@Url.Action("Edit")/<%=row.Id%>">@Translations.Edit</a>
</script>
